## 重構

講到設計模式就必須提到重構的概念，所有設計模式，都是一種不同的重構理念，因此掌握基本重構的概念與方法，

也等於掌握設計模式精隨的精華概念，後續不同設計模式其實也都是圍繞著這些概念，並以不同實作方式去實現它。


### 基本重構概念

**提煉**

  將一段複雜的代碼邏輯拆分成一個函數出來，並妥善以其目的命名他。

**行內化**

  當函數本體與函數名同樣易讀時，直接調用該函數本體，去除多餘的函數。

**內聯臨時變量**

  當一個臨時變量並沒有被多次調用，且本身語意是易讀的時候，直接將該變量邏輯替換到該變數位置，

  消除多餘臨時變量，尤其是該臨時變量會阻礙代碼的提煉時。

**以查詢代替臨時變量**

  臨時變量只能求值一次，無法動態求值，藉由查詢的方式，可以更靈活的用於代碼之中，也更易於代碼的提煉。

**解釋性變量**

  使用一個變量來表示一些條件判斷結果，例如以 isValid 去表示 data !== null && data !== ''

**移除對函數參數的直接付值**

  盡量避免對函數傳入的參數進行修改，以一個新的變量去儲存該參數值，後續對該變量進行修改，參數請保持只讀特性。

**以函數對象取代函數**

  在大型函數中，其中對局部變量的使用導致無法進行 Extract Method時，可以創建一個新的函數物件(建構子)，
  
  傳入包含所有會用到的局部變量，並將函數包裹於其中，即可將局部變量、邏輯進行提煉，後續調用只需創建實
  
  例進行即可，大大增加可讀性。

**替換算法**

  將函數本體替換為另一種算法。在進行函數整體替換之前，請先確保已經將可提煉的代碼提取至最小塊，
  
  替換巨大而複雜的算法是非常困難的，先將它分解為較簡單的小型函數，才能更好的優化替換算法。



### 其他重構概念


**自封裝字段**

  為字段建立取值、設值函數，並只以這些函數來訪問該字段，提高與字段之間的耦合關係。

**以對象取代數據值**

  初始開發時，資料項單純較簡單可讀，但隨著逐漸開發，代碼逐漸複雜後，相關數據就會分散在各處，
  
  導致可讀性、開發速度下降許多，透過將關聯數據儲存在對象中，不僅提升可讀性，也讓後續開發可以持續保持彈性進行增修、刪減。

**保持對象完整**

  當從某同一對象取出若干值，並作為另一個函數調用的參數時，改為傳遞整個對象。

  避免該函數添加新參數時，還必需手動去各個調用處添加新參數。

**以函數取代參數值**

  對象調用某函數，以其結果作為參數傳入時另一個函數時，若被傳入參數的函數本身也能調用該函數，
  
  則去除該外部調用與參數，直接在另一個函數中調用即可。過多的參數更容易導致使用者混亂。

**引入參數對象**

  某些參數總是同時出現，則以一個對象取代這些參數

**以工廠函數取代構造函數**

  當希望在創建對象時，不僅僅只做簡單的建構動作，將構造函數替換為工廠函數。